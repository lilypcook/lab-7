---
title: "Lab 7"
format: html
editor: visual
embed-resources: true
---

### Libraries

```{r}
#| label: libraries
#| output: false

library(tidyverse)
library(httr)
library(tidyjson)
library(jsonlite)
library(leaflet)

```

### Reading in capitals

```{r}
#| label: capitals

capitals <- read_table("state_capitals_ll.txt", col_names = F)

capital_names <- read_table("state_capitals_name.txt", col_names = F)

colnames(capitals) <- c("state", "lat", "long") #add names
colnames(capital_names) <- c("state", "capital")

capitals <- capitals %>% 
  filter(state != "US") %>% # filter out random coords
  filter(state != "AK") # filter out alaska, doesn't pass by


# list of all API links for states (lat and long inserted) - total of 51 
links <- paste0("https://api.g7vrd.co.uk/v1/satellite-passes/25544/", 
                capitals$lat, "/", 
                capitals$long, ".json")


```

## API

```{r}
#| label: API pull

# needs to be changed to get ALL links , this is just for Alabama
res <- GET("https://api.g7vrd.co.uk/v1/satellite-passes/25544/32.36154/-86.27912.json")

status_code(res)

passtime <- res$content %>% 
  rawToChar() %>%
  fromJSON()



```

## Leaflet
